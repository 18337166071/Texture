//
//  Configuration.m
//  Autogenerated by plank
//
//  DO NOT EDIT - EDITS WILL BE OVERWRITTEN
//  @generated
//

#import "Configuration.h"

struct ConfigurationDirtyProperties {
    unsigned int ConfigurationDirtyPropertyExperimentalFeatures:1;
};

@interface Configuration ()
@property (nonatomic, assign, readwrite) struct ConfigurationDirtyProperties configurationDirtyProperties;
@end

@interface ConfigurationBuilder ()
@property (nonatomic, assign, readwrite) struct ConfigurationDirtyProperties configurationDirtyProperties;
@end

@implementation Configuration
+ (NSString *)className
{
    return @"Configuration";
}
+ (NSString *)polymorphicTypeIdentifier
{
    return @"configuration";
}
+ (instancetype)modelObjectWithDictionary:(NSDictionary *)dictionary
{
    return [[self alloc] initWithModelDictionary:dictionary];
}
- (instancetype)init
{
    return [self initWithModelDictionary:@{}];
}
- (instancetype)initWithModelDictionary:(NS_VALID_UNTIL_END_OF_SCOPE NSDictionary *)modelDictionary
{
    NSParameterAssert(modelDictionary);
    if (!modelDictionary) {
        return self;
    }
    if (!(self = [super init])) {
        return self;
    }
        {
            __unsafe_unretained id value = modelDictionary[@"experimentalFeatures"]; // Collection will retain.
            if (value != nil) {
                if (value != (id)kCFNull) {
                    NSArray *items = value;
                    NSMutableArray *result0 = [NSMutableArray arrayWithCapacity:items.count];
                    for (id obj0 in items) {
                        if (obj0 != (id)kCFNull) {
                            id tmp0 = nil;
                            tmp0 = [obj0 copy];
                            if (tmp0 != nil) {
                                [result0 addObject:tmp0];
                            }
                        }
                    }
                    self->_experimentalFeatures = result0;
                }
                self->_configurationDirtyProperties.ConfigurationDirtyPropertyExperimentalFeatures = 1;
            }
        }
    if ([self class] == [Configuration class]) {
        [[NSNotificationCenter defaultCenter] postNotificationName:kPlankDidInitializeNotification object:self userInfo:@{ kPlankInitTypeKey : @(PlankModelInitTypeDefault) }];
    }
    return self;
}
- (instancetype)initWithBuilder:(ConfigurationBuilder *)builder
{
    NSParameterAssert(builder);
    return [self initWithBuilder:builder initType:PlankModelInitTypeDefault];
}
- (instancetype)initWithBuilder:(ConfigurationBuilder *)builder initType:(PlankModelInitType)initType
{
    NSParameterAssert(builder);
    if (!(self = [super init])) {
        return self;
    }
    _experimentalFeatures = builder.experimentalFeatures;
    _configurationDirtyProperties = builder.configurationDirtyProperties;
    if ([self class] == [Configuration class]) {
        [[NSNotificationCenter defaultCenter] postNotificationName:kPlankDidInitializeNotification object:self userInfo:@{ kPlankInitTypeKey : @(initType) }];
    }
    return self;
}
- (NSString *)debugDescription
{
    NSArray<NSString *> *parentDebugDescription = [[super debugDescription] componentsSeparatedByString:@"\n"];
    NSMutableArray *descriptionFields = [NSMutableArray arrayWithCapacity:1];
    [descriptionFields addObject:parentDebugDescription];
    struct ConfigurationDirtyProperties props = _configurationDirtyProperties;
    if (props.ConfigurationDirtyPropertyExperimentalFeatures) {
        [descriptionFields addObject:[@"_experimentalFeatures = " stringByAppendingFormat:@"%@", _experimentalFeatures]];
    }
    return [NSString stringWithFormat:@"Configuration = {\n%@\n}", debugDescriptionForFields(descriptionFields)];
}
- (instancetype)copyWithBlock:(PLANK_NOESCAPE void (^)(ConfigurationBuilder *builder))block
{
    NSParameterAssert(block);
    ConfigurationBuilder *builder = [[ConfigurationBuilder alloc] initWithModel:self];
    block(builder);
    return [builder build];
}
- (BOOL)isEqual:(id)anObject
{
    if (self == anObject) {
        return YES;
    }
    if ([anObject isKindOfClass:[Configuration class]] == NO) {
        return NO;
    }
    return [self isEqualToConfiguration:anObject];
}
- (BOOL)isEqualToConfiguration:(Configuration *)anObject
{
    return (
        (anObject != nil) &&
        (_experimentalFeatures == anObject.experimentalFeatures || [_experimentalFeatures isEqualToArray:anObject.experimentalFeatures])
    );
}
- (NSUInteger)hash
{
    NSUInteger subhashes[] = {
        17,
        [_experimentalFeatures hash]
    };
    return PINIntegerArrayHash(subhashes, sizeof(subhashes) / sizeof(subhashes[0]));
}
- (instancetype)mergeWithModel:(Configuration *)modelObject
{
    return [self mergeWithModel:modelObject initType:PlankModelInitTypeFromMerge];
}
- (instancetype)mergeWithModel:(Configuration *)modelObject initType:(PlankModelInitType)initType
{
    NSParameterAssert(modelObject);
    ConfigurationBuilder *builder = [[ConfigurationBuilder alloc] initWithModel:self];
    [builder mergeWithModel:modelObject];
    return [[Configuration alloc] initWithBuilder:builder initType:initType];
}
#pragma mark - NSCopying
- (id)copyWithZone:(NSZone *)zone
{
    return self;
}
#pragma mark - NSSecureCoding
+ (BOOL)supportsSecureCoding
{
    return YES;
}
- (instancetype)initWithCoder:(NSCoder *)aDecoder
{
    if (!(self = [super init])) {
        return self;
    }
    _experimentalFeatures = [aDecoder decodeObjectOfClasses:[NSSet setWithArray:@[[NSString class], [NSArray class]]] forKey:@"experimentalFeatures"];
    _configurationDirtyProperties.ConfigurationDirtyPropertyExperimentalFeatures = [aDecoder decodeIntForKey:@"experimentalFeatures_dirty_property"] & 0x1;
    if ([self class] == [Configuration class]) {
        [[NSNotificationCenter defaultCenter] postNotificationName:kPlankDidInitializeNotification object:self userInfo:@{ kPlankInitTypeKey : @(PlankModelInitTypeDefault) }];
    }
    return self;
}
- (void)encodeWithCoder:(NSCoder *)aCoder
{
    [aCoder encodeObject:self.experimentalFeatures forKey:@"experimentalFeatures"];
    [aCoder encodeInt:_configurationDirtyProperties.ConfigurationDirtyPropertyExperimentalFeatures forKey:@"experimentalFeatures_dirty_property"];
}
@end

@implementation ConfigurationBuilder
- (instancetype)initWithModel:(Configuration *)modelObject
{
    NSParameterAssert(modelObject);
    if (!(self = [super init])) {
        return self;
    }
    struct ConfigurationDirtyProperties configurationDirtyProperties = modelObject.configurationDirtyProperties;
    if (configurationDirtyProperties.ConfigurationDirtyPropertyExperimentalFeatures) {
        _experimentalFeatures = modelObject.experimentalFeatures;
    }
    _configurationDirtyProperties = configurationDirtyProperties;
    return self;
}
- (Configuration *)build
{
    return [[Configuration alloc] initWithBuilder:self];
}
- (void)mergeWithModel:(Configuration *)modelObject
{
    NSParameterAssert(modelObject);
    ConfigurationBuilder *builder = self;
    if (modelObject.configurationDirtyProperties.ConfigurationDirtyPropertyExperimentalFeatures) {
        builder.experimentalFeatures = modelObject.experimentalFeatures;
    }
}
- (void)setExperimentalFeatures:(NSArray<NSString *> *)experimentalFeatures
{
    _experimentalFeatures = experimentalFeatures;
    _configurationDirtyProperties.ConfigurationDirtyPropertyExperimentalFeatures = 1;
}
@end
